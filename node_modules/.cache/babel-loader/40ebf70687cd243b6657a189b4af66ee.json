{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { SubscriptionClient } from 'subscriptions-transport-ws';\nimport { ApolloLink } from \"../core/index.js\";\n\nvar WebSocketLink = function (_super) {\n  __extends(WebSocketLink, _super);\n\n  function WebSocketLink(paramsOrClient) {\n    var _this = _super.call(this) || this;\n\n    if (paramsOrClient instanceof SubscriptionClient) {\n      _this.subscriptionClient = paramsOrClient;\n    } else {\n      _this.subscriptionClient = new SubscriptionClient(paramsOrClient.uri, paramsOrClient.options, paramsOrClient.webSocketImpl);\n    }\n\n    return _this;\n  }\n\n  WebSocketLink.prototype.request = function (operation) {\n    return this.subscriptionClient.request(operation);\n  };\n\n  return WebSocketLink;\n}(ApolloLink);\n\nexport { WebSocketLink };","map":{"version":3,"sources":["../../../src/link/ws/index.ts"],"names":[],"mappings":";AAAA,SAAS,kBAAT,QAAkD,4BAAlD;AAEA,SAAS,UAAT,QAAmD,kBAAnD;;AA4BA,IAAA,aAAA,GAAA,UAAA,MAAA,EAAA;AAAmC,EAAA,SAAA,CAAA,aAAA,EAAA,MAAA,CAAA;;AAGjC,WAAA,aAAA,CACE,cADF,EACkE;AADlE,QAAA,KAAA,GAGE,MAAA,CAAA,IAAA,CAAA,IAAA,KAAO,IAHT;;AAKE,QAAI,cAAc,YAAY,kBAA9B,EAAkD;AAChD,MAAA,KAAI,CAAC,kBAAL,GAA0B,cAA1B;AACD,KAFD,MAEO;AACL,MAAA,KAAI,CAAC,kBAAL,GAA0B,IAAI,kBAAJ,CACxB,cAAc,CAAC,GADS,EAExB,cAAc,CAAC,OAFS,EAGxB,cAAc,CAAC,aAHS,CAA1B;AAKD;;;AACF;;AAEM,EAAA,aAAA,CAAA,SAAA,CAAA,OAAA,GAAP,UAAe,SAAf,EAAmC;AACjC,WAAO,KAAK,kBAAL,CAAwB,OAAxB,CAAgC,SAAhC,CAAP;AAGD,GAJM;;AAKT,SAAA,aAAA;AAAC,CAxBD,CAAmC,UAAnC,CAAA","sourcesContent":["import { SubscriptionClient, ClientOptions } from 'subscriptions-transport-ws';\n\nimport { ApolloLink, Operation, FetchResult } from '../core';\nimport { Observable } from '../../utilities';\n\nexport namespace WebSocketLink {\n  /**\n   * Configuration to use when constructing the subscription client (subscriptions-transport-ws).\n   */\n  export interface Configuration {\n    /**\n     * The endpoint to connect to.\n     */\n    uri: string;\n\n    /**\n     * Options to pass when constructing the subscription client.\n     */\n    options?: ClientOptions;\n\n    /**\n     * A custom WebSocket implementation to use.\n     */\n    webSocketImpl?: any;\n  }\n}\n\n// For backwards compatibility.\nexport import WebSocketParams = WebSocketLink.Configuration;\n\nexport class WebSocketLink extends ApolloLink {\n  private subscriptionClient: SubscriptionClient;\n\n  constructor(\n    paramsOrClient: WebSocketLink.Configuration | SubscriptionClient,\n  ) {\n    super();\n\n    if (paramsOrClient instanceof SubscriptionClient) {\n      this.subscriptionClient = paramsOrClient;\n    } else {\n      this.subscriptionClient = new SubscriptionClient(\n        paramsOrClient.uri,\n        paramsOrClient.options,\n        paramsOrClient.webSocketImpl,\n      );\n    }\n  }\n\n  public request(operation: Operation): Observable<FetchResult> | null {\n    return this.subscriptionClient.request(operation) as Observable<\n      FetchResult\n    >;\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}