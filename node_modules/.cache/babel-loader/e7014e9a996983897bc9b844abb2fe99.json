{"ast":null,"code":"var _jsxFileName = \"/Users/adammartiska/Projects/eMenu/GUI/eMenu-customer/src/pages/food-menu-page.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { addToCart, cacheMeals } from \"./mealsSlice\";\nimport { useMealsQuery } from \"../generated/graphql\";\nimport { find } from \"ramda\";\nimport \"./food-menu-page.scss\";\nimport FoodCard from \"../components/FoodCard\";\nimport Box from \"@mui/material/Box\";\nimport Paper from \"@mui/material/Paper\";\nimport Typography from \"@mui/material/Typography\";\nimport SwipeableDrawer from \"@mui/material/SwipeableDrawer\";\nimport Button from \"@mui/material/Button\";\nimport Checkbox from \"@mui/material/Checkbox\";\nimport FormControlLabel from \"@mui/material/FormControlLabel\";\nimport TextareaAutosize from \"@mui/material/TextareaAutosize\";\nimport TextField from \"@mui/material/TextField\";\nimport Divider from \"@mui/material/Divider\";\nimport AddShoppingCartIcon from \"@mui/icons-material/AddShoppingCart\";\nimport burgerUrl from \"./burger.jpeg\";\nimport { getMealById } from \"../utils/utils\";\nimport { SwipeableBottomDrawer } from \"../components/SwipeableBottomDrawer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst FoodMenuPage = () => {\n  _s();\n\n  const mealsOrder = useSelector(state => {\n    var _state$meals;\n\n    return state === null || state === void 0 ? void 0 : (_state$meals = state.meals) === null || _state$meals === void 0 ? void 0 : _state$meals.mealOrder;\n  });\n  const {\n    data: meals,\n    error,\n    loading\n  } = useMealsQuery();\n  const [mealOrder, setMealOrder] = React.useState({});\n  const [showDrawer, setShowDrawer] = React.useState(false);\n  const [currentlyOpenedMealId, setCurrentlyOpenedMealId] = React.useState(null);\n  const [currentMealCount, setCurrentMealCount] = React.useState(1);\n  const dispatch = useDispatch();\n\n  const toggleDrawer = function (open) {\n    let id = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    return event => {\n      if (open) {\n        var _maybeMeal$count;\n\n        const maybeMeal = getMealById(id, mealsOrder);\n        setIsAdditionalOrderInfo(false);\n        setCurrentMealCount((_maybeMeal$count = maybeMeal === null || maybeMeal === void 0 ? void 0 : maybeMeal.count) !== null && _maybeMeal$count !== void 0 ? _maybeMeal$count : 1);\n      }\n\n      setCurrentlyOpenedMealId(id);\n      setShowDrawer(open);\n    };\n  };\n\n  React.useEffect(() => {\n    // cache meals once its data is loaded\n    dispatch(cacheMeals(meals));\n  }, [meals, dispatch]);\n  const handleAddButtonClick = React.useCallback(id => setMealOrder({ ...mealOrder,\n    [id]: ++mealOrder[id]\n  }), [mealOrder]);\n  const handleRemoveButtonClick = React.useCallback(id => {\n    if (mealOrder[id] === 0) {\n      return;\n    }\n\n    setMealOrder({ ...mealOrder,\n      [id]: --mealOrder[id]\n    });\n  }, [mealOrder]); //TODO ADD some kind of user notification that items were added into cart\n\n  const handleAddToBag = React.useCallback(_ref => {\n    var _additionalorderInfo;\n\n    let {\n      id,\n      count,\n      additionalOrderInfo\n    } = _ref;\n    dispatch(addToCart({\n      id,\n      count,\n      additionalorderInfo: (_additionalorderInfo = additionalorderInfo) !== null && _additionalorderInfo !== void 0 ? _additionalorderInfo : undefined\n    }));\n    setShowDrawer(false);\n  }, [currentlyOpenedMealId, currentMealCount, additionalorderInfo, dispatch]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"food-menu-page-wrapper\",\n    children: [meals === null || meals === void 0 ? void 0 : meals.meals.map(_ref2 => {\n      let {\n        id,\n        name,\n        price\n      } = _ref2;\n      return /*#__PURE__*/_jsxDEV(FoodCard, {\n        id: id // onAddButtonClick={handleAddButtonClick}\n        // onRemoveButtonClick={handleRemoveButtonClick}\n        // onAddToBagClick={handleAddToBag}\n        ,\n        title: name,\n        count: mealOrder.cocaCola,\n        price: price,\n        onClick: toggleDrawer(true, id) //onClick={(id) => console.log(id)}\n\n      }, id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this);\n    }), /*#__PURE__*/_jsxDEV(SwipeableBottomDrawer, {\n      isMeal: true,\n      showDrawer: showDrawer,\n      setShowDrawer: setShowDrawer,\n      handleAddToBag: handleAddToBag,\n      currentlyOpenedItemId: currentlyOpenedMealId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n\n_s(FoodMenuPage, \"Pe/xQwd4JNQUHsg0zPCpEy4L1g8=\", false, function () {\n  return [useSelector, useMealsQuery, useDispatch];\n});\n\n_c = FoodMenuPage;\nexport default FoodMenuPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"FoodMenuPage\");","map":{"version":3,"sources":["/Users/adammartiska/Projects/eMenu/GUI/eMenu-customer/src/pages/food-menu-page.js"],"names":["React","useDispatch","useSelector","addToCart","cacheMeals","useMealsQuery","find","FoodCard","Box","Paper","Typography","SwipeableDrawer","Button","Checkbox","FormControlLabel","TextareaAutosize","TextField","Divider","AddShoppingCartIcon","burgerUrl","getMealById","SwipeableBottomDrawer","FoodMenuPage","mealsOrder","state","meals","mealOrder","data","error","loading","setMealOrder","useState","showDrawer","setShowDrawer","currentlyOpenedMealId","setCurrentlyOpenedMealId","currentMealCount","setCurrentMealCount","dispatch","toggleDrawer","open","id","event","maybeMeal","setIsAdditionalOrderInfo","count","useEffect","handleAddButtonClick","useCallback","handleRemoveButtonClick","handleAddToBag","additionalOrderInfo","additionalorderInfo","undefined","map","name","price","cocaCola"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { addToCart, cacheMeals } from \"./mealsSlice\";\nimport { useMealsQuery } from \"../generated/graphql\";\nimport { find } from \"ramda\";\nimport \"./food-menu-page.scss\";\nimport FoodCard from \"../components/FoodCard\";\nimport Box from \"@mui/material/Box\";\nimport Paper from \"@mui/material/Paper\";\nimport Typography from \"@mui/material/Typography\";\nimport SwipeableDrawer from \"@mui/material/SwipeableDrawer\";\nimport Button from \"@mui/material/Button\";\nimport Checkbox from \"@mui/material/Checkbox\";\nimport FormControlLabel from \"@mui/material/FormControlLabel\";\nimport TextareaAutosize from \"@mui/material/TextareaAutosize\";\nimport TextField from \"@mui/material/TextField\";\nimport Divider from \"@mui/material/Divider\";\nimport AddShoppingCartIcon from \"@mui/icons-material/AddShoppingCart\";\nimport burgerUrl from \"./burger.jpeg\";\nimport { getMealById } from \"../utils/utils\";\nimport { SwipeableBottomDrawer } from \"../components/SwipeableBottomDrawer\";\n\nconst FoodMenuPage = () => {\n  const mealsOrder = useSelector((state) => state?.meals?.mealOrder);\n  const { data: meals, error, loading } = useMealsQuery();\n  const [mealOrder, setMealOrder] = React.useState({});\n  const [showDrawer, setShowDrawer] = React.useState(false);\n  const [currentlyOpenedMealId, setCurrentlyOpenedMealId] =\n    React.useState(null);\n  const [currentMealCount, setCurrentMealCount] = React.useState(1);\n  const dispatch = useDispatch();\n  const toggleDrawer =\n    (open, id = null) =>\n    (event) => {\n      if (open) {\n        const maybeMeal = getMealById(id, mealsOrder);\n        setIsAdditionalOrderInfo(false);\n        setCurrentMealCount(maybeMeal?.count ?? 1);\n      }\n      setCurrentlyOpenedMealId(id);\n      setShowDrawer(open);\n    };\n  React.useEffect(() => {\n    // cache meals once its data is loaded\n    dispatch(cacheMeals(meals));\n  }, [meals, dispatch]);\n\n  const handleAddButtonClick = React.useCallback(\n    (id) =>\n      setMealOrder({\n        ...mealOrder,\n        [id]: ++mealOrder[id],\n      }),\n    [mealOrder]\n  );\n\n  const handleRemoveButtonClick = React.useCallback(\n    (id) => {\n      if (mealOrder[id] === 0) {\n        return;\n      }\n      setMealOrder({\n        ...mealOrder,\n        [id]: --mealOrder[id],\n      });\n    },\n    [mealOrder]\n  );\n\n  //TODO ADD some kind of user notification that items were added into cart\n  const handleAddToBag = React.useCallback(\n    ({ id, count, additionalOrderInfo }) => {\n      dispatch(\n        addToCart({\n          id,\n          count,\n          additionalorderInfo: additionalorderInfo ?? undefined,\n        })\n      );\n      setShowDrawer(false);\n    },\n    [currentlyOpenedMealId, currentMealCount, additionalorderInfo, dispatch]\n  );\n  return (\n    <div className=\"food-menu-page-wrapper\">\n      {meals?.meals.map(({ id, name, price }) => (\n        <FoodCard\n          key={id}\n          id={id}\n          // onAddButtonClick={handleAddButtonClick}\n          // onRemoveButtonClick={handleRemoveButtonClick}\n          // onAddToBagClick={handleAddToBag}\n          title={name}\n          count={mealOrder.cocaCola}\n          price={price}\n          onClick={toggleDrawer(true, id)}\n          //onClick={(id) => console.log(id)}\n        />\n      ))}\n      <SwipeableBottomDrawer\n        isMeal\n        showDrawer={showDrawer}\n        setShowDrawer={setShowDrawer}\n        handleAddToBag={handleAddToBag}\n        currentlyOpenedItemId={currentlyOpenedMealId}\n      />\n    </div>\n  );\n};\n\nexport default FoodMenuPage;\n"]},"metadata":{},"sourceType":"module"}