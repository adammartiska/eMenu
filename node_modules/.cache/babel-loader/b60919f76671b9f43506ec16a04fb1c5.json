{"ast":null,"code":"var _jsxFileName = \"/Users/adammartiska/Projects/eMenu/GUI/eMenu-customer/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport FoodMenuPage from \"./pages/food-menu-page\";\nimport DrinksMenuPage from \"./pages/drinks-menu-page\";\nimport CheckoutPage from \"./pages/checkout-page\";\nimport OrderStatePage from \"./pages/order-state-page\";\nimport store from \"./store\";\nimport { Provider } from \"react-redux\";\nimport { ThemeProvider, createTheme } from \"@mui/material/styles\";\nimport BottomNavigator from \"./BottomNavigator\";\nimport Header from \"./Header\";\nimport \"./App.css\";\nimport { ApolloClient, InMemoryCache, ApolloProvider } from \"@apollo/client\";\nimport { last } from \"ramda\";\nimport { QueryClient, QueryClientProvider } from \"react-query\";\nimport { split, HttpLink } from \"@apollo/client\";\nimport { useSelector } from \"react-redux\";\nimport { getMainDefinition } from \"@apollo/client/utilities\";\nimport { useOrderChangedSubscriptionSubscription } from \"./generated/graphql\";\nimport { cacheOrderedDrinksFromWebSocket, cacheOrderedMealsFromWebSocket } from \"./pages/orderSlice\";\nimport { WebSocketLink } from \"@apollo/client/link/ws\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst httpLink = new HttpLink({\n  uri: \"http://localhost:8000/graphql\"\n});\nconst wsLink = new WebSocketLink({\n  uri: \"ws://localhost:8000/graphql\",\n  options: {\n    reconnect: true // TODO AUTHENTICATION\n    // connectionParams: {\n    //   authToken: user.authToken,\n    // },\n\n  }\n}); // The split function takes three parameters:\n//\n// * A function that's called for each operation to execute\n// * The Link to use for an operation if the function returns a \"truthy\" value\n// * The Link to use for an operation if the function returns a \"falsy\" value\n\nconst splitLink = split(_ref => {\n  let {\n    query\n  } = _ref;\n  console.log(query);\n  const definition = getMainDefinition(query);\n  return definition.kind === \"OperationDefinition\" && definition.operation === \"subscription\";\n}, wsLink, httpLink);\nconst client = new ApolloClient({\n  //uri: \"http://localhost:8000/graphql\",\n  link: splitLink,\n  fetchOptions: {\n    mode: \"no-cors\"\n  },\n  //credentials: \"same-origin\",\n  cache: new InMemoryCache()\n}); // Create a client\n\nconst queryClient = new QueryClient();\nconst theme = createTheme({\n  typography: {\n    h6: {\n      fontSize: 14\n    },\n    h5: {\n      fontSize: 15\n    },\n    h4: {\n      fontSize: 18\n    },\n    subtitle2: {\n      fontSize: 12\n    }\n  },\n  //We can define App themes in here\n  status: {\n    danger: \"#e53e3e\"\n  },\n  palette: {\n    primary: {\n      main: \"#1769aa\",\n      lighter: \"##6573C3\"\n    },\n    lighter: {\n      main: \"#757ce8\"\n    },\n    neutral: {\n      main: \"#64748B\",\n      contrastText: \"#fff\"\n    },\n    primaryColor: \"#4a148c\",\n    secondaryColor: \"#ff6f00\",\n    sedatmava: \"#C9C9C9\",\n    carhartt: \"#006f33\",\n    primaryPurple: \"#6200EE\",\n    primaryBlue: \"#246EE9\",\n    lightGray: \"#EAEAEA\",\n    cornFlower: \"#7B8CDE\",\n    charCoal: {\n      main: \"#2D4654\"\n    },\n    mantis: \"#7DD181\",\n    // black: {\n    //   main: \"#000\",\n    // },\n    black: \"#000000\",\n    onyx: {\n      main: \"#D0CFCF\",\n      font: \"#000\" // zaujimava modra main: \"#6699CC\",\n      //main: \"#DFE0DC\",\n      //main: \"#F4F4F8\",\n      //main: \"#C9CAD9\",\n\n    },\n    secondary: {\n      main: \"#6425A7\"\n    },\n    secondaryLighter: {\n      main: \"#F4EDFB\"\n    },\n    onyxDarker: {\n      main: \"#484747\"\n    },\n    darkGray: \"#ccc\"\n  },\n  components: {\n    MuiButtonGroup: {\n      styleOverrides: {\n        root: {\n          // apply theme's border-radius instead of component's default\n          minWidth: 20\n        },\n        grouped: {\n          minWidth: 20\n        }\n      }\n    }\n  }\n});\n\nfunction App() {\n  _s();\n\n  const orderId = useSelector(state => {\n    var _state$order;\n\n    return state === null || state === void 0 ? void 0 : (_state$order = state.order) === null || _state$order === void 0 ? void 0 : _state$order.id;\n  });\n  const token = useSelector(state => {\n    var _state$user;\n\n    return state === null || state === void 0 ? void 0 : (_state$user = state.user) === null || _state$user === void 0 ? void 0 : _state$user.token;\n  });\n  const {\n    data,\n    loading,\n    error\n  } = useOrderChangedSubscriptionSubscription({\n    variables: {\n      orderId,\n      token\n    }\n  });\n  React.useEffect(() => {\n    if (data === null || data === void 0 ? void 0 : data.orderChanged) {\n      var _data$orderChanged;\n\n      const newSuborder = last(data === null || data === void 0 ? void 0 : data.orderChanged.suborders);\n      console.log(newSuborder);\n      setOrderedMeals(orderedMeals => {\n        if (orderedMeals) {\n          return [...(newSuborder === null || newSuborder === void 0 ? void 0 : newSuborder.meals), ...orderedMeals];\n        } else {\n          return newSuborder === null || newSuborder === void 0 ? void 0 : newSuborder.meals;\n        }\n      });\n      setOrderedDrinks(orderedDrinks => {\n        if (orderedDrinks) {\n          return [...(newSuborder === null || newSuborder === void 0 ? void 0 : newSuborder.drinks), ...orderedDrinks];\n        } else {\n          return newSuborder === null || newSuborder === void 0 ? void 0 : newSuborder.drinks;\n        }\n      });\n      setCurrentFinalPrice(data === null || data === void 0 ? void 0 : (_data$orderChanged = data.orderChanged) === null || _data$orderChanged === void 0 ? void 0 : _data$orderChanged.finalPrice);\n    }\n  }, [data, error]);\n  const [value, setValue] = React.useState(\"/\");\n  return /*#__PURE__*/_jsxDEV(QueryClientProvider, {\n    client: queryClient,\n    children: /*#__PURE__*/_jsxDEV(ApolloProvider, {\n      client: client,\n      children: /*#__PURE__*/_jsxDEV(Provider, {\n        store: store,\n        children: /*#__PURE__*/_jsxDEV(ThemeProvider, {\n          theme: theme,\n          children: /*#__PURE__*/_jsxDEV(Router, {\n            children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"app-wrapper\",\n              children: [/*#__PURE__*/_jsxDEV(Switch, {\n                children: [/*#__PURE__*/_jsxDEV(Route, {\n                  path: \"/food\",\n                  children: /*#__PURE__*/_jsxDEV(FoodMenuPage, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Route, {\n                  path: \"/drinks\",\n                  children: /*#__PURE__*/_jsxDEV(DrinksMenuPage, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 198,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Route, {\n                  path: \"/cart\",\n                  children: /*#__PURE__*/_jsxDEV(CheckoutPage, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 201,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Route, {\n                  path: \"/orderInformation\",\n                  children: /*#__PURE__*/_jsxDEV(OrderStatePage, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(BottomNavigator, {\n                onRouteChange: (event, newValue) => setValue(newValue),\n                currentRoute: value\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"Z4sS8ZfUs1gcbG/+LaNMhY8tGLU=\", false, function () {\n  return [useSelector, useSelector, useOrderChangedSubscriptionSubscription];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/adammartiska/Projects/eMenu/GUI/eMenu-customer/src/App.js"],"names":["React","BrowserRouter","Router","Route","Switch","FoodMenuPage","DrinksMenuPage","CheckoutPage","OrderStatePage","store","Provider","ThemeProvider","createTheme","BottomNavigator","Header","ApolloClient","InMemoryCache","ApolloProvider","last","QueryClient","QueryClientProvider","split","HttpLink","useSelector","getMainDefinition","useOrderChangedSubscriptionSubscription","cacheOrderedDrinksFromWebSocket","cacheOrderedMealsFromWebSocket","WebSocketLink","httpLink","uri","wsLink","options","reconnect","splitLink","query","console","log","definition","kind","operation","client","link","fetchOptions","mode","cache","queryClient","theme","typography","h6","fontSize","h5","h4","subtitle2","status","danger","palette","primary","main","lighter","neutral","contrastText","primaryColor","secondaryColor","sedatmava","carhartt","primaryPurple","primaryBlue","lightGray","cornFlower","charCoal","mantis","black","onyx","font","secondary","secondaryLighter","onyxDarker","darkGray","components","MuiButtonGroup","styleOverrides","root","minWidth","grouped","App","orderId","state","order","id","token","user","data","loading","error","variables","useEffect","orderChanged","newSuborder","suborders","setOrderedMeals","orderedMeals","meals","setOrderedDrinks","orderedDrinks","drinks","setCurrentFinalPrice","finalPrice","value","setValue","useState","event","newValue"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,aAAa,IAAIC,MAA1B,EAAkCC,KAAlC,EAAyCC,MAAzC,QAAuD,kBAAvD;AACA,OAAOC,YAAP,MAAyB,wBAAzB;AACA,OAAOC,cAAP,MAA2B,0BAA3B;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,OAAOC,cAAP,MAA2B,0BAA3B;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,aAAT,EAAwBC,WAAxB,QAA2C,sBAA3C;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAO,WAAP;AACA,SAASC,YAAT,EAAuBC,aAAvB,EAAsCC,cAAtC,QAA4D,gBAA5D;AACA,SAASC,IAAT,QAAqB,OAArB;AACA,SAASC,WAAT,EAAsBC,mBAAtB,QAAiD,aAAjD;AACA,SAASC,KAAT,EAAgBC,QAAhB,QAAgC,gBAAhC;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,iBAAT,QAAkC,0BAAlC;AACA,SAASC,uCAAT,QAAwD,qBAAxD;AACA,SACEC,+BADF,EAEEC,8BAFF,QAGO,oBAHP;AAIA,SAASC,aAAT,QAA8B,wBAA9B;;AAEA,MAAMC,QAAQ,GAAG,IAAIP,QAAJ,CAAa;AAC5BQ,EAAAA,GAAG,EAAE;AADuB,CAAb,CAAjB;AAIA,MAAMC,MAAM,GAAG,IAAIH,aAAJ,CAAkB;AAC/BE,EAAAA,GAAG,EAAE,6BAD0B;AAE/BE,EAAAA,OAAO,EAAE;AACPC,IAAAA,SAAS,EAAE,IADJ,CAEP;AACA;AACA;AACA;;AALO;AAFsB,CAAlB,CAAf,C,CAWA;AACA;AACA;AACA;AACA;;AACA,MAAMC,SAAS,GAAGb,KAAK,CACrB,QAAe;AAAA,MAAd;AAAEc,IAAAA;AAAF,GAAc;AACbC,EAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,QAAMG,UAAU,GAAGd,iBAAiB,CAACW,KAAD,CAApC;AACA,SACEG,UAAU,CAACC,IAAX,KAAoB,qBAApB,IACAD,UAAU,CAACE,SAAX,KAAyB,cAF3B;AAID,CARoB,EASrBT,MATqB,EAUrBF,QAVqB,CAAvB;AAaA,MAAMY,MAAM,GAAG,IAAI1B,YAAJ,CAAiB;AAC9B;AACA2B,EAAAA,IAAI,EAAER,SAFwB;AAG9BS,EAAAA,YAAY,EAAE;AACZC,IAAAA,IAAI,EAAE;AADM,GAHgB;AAM9B;AACAC,EAAAA,KAAK,EAAE,IAAI7B,aAAJ;AAPuB,CAAjB,CAAf,C,CAUA;;AACA,MAAM8B,WAAW,GAAG,IAAI3B,WAAJ,EAApB;AAEA,MAAM4B,KAAK,GAAGnC,WAAW,CAAC;AACxBoC,EAAAA,UAAU,EAAE;AACVC,IAAAA,EAAE,EAAE;AACFC,MAAAA,QAAQ,EAAE;AADR,KADM;AAIVC,IAAAA,EAAE,EAAE;AACFD,MAAAA,QAAQ,EAAE;AADR,KAJM;AAOVE,IAAAA,EAAE,EAAE;AACFF,MAAAA,QAAQ,EAAE;AADR,KAPM;AAUVG,IAAAA,SAAS,EAAE;AACTH,MAAAA,QAAQ,EAAE;AADD;AAVD,GADY;AAexB;AACAI,EAAAA,MAAM,EAAE;AACNC,IAAAA,MAAM,EAAE;AADF,GAhBgB;AAmBxBC,EAAAA,OAAO,EAAE;AACPC,IAAAA,OAAO,EAAE;AACPC,MAAAA,IAAI,EAAE,SADC;AAEPC,MAAAA,OAAO,EAAE;AAFF,KADF;AAKPA,IAAAA,OAAO,EAAE;AACPD,MAAAA,IAAI,EAAE;AADC,KALF;AAQPE,IAAAA,OAAO,EAAE;AACPF,MAAAA,IAAI,EAAE,SADC;AAEPG,MAAAA,YAAY,EAAE;AAFP,KARF;AAYPC,IAAAA,YAAY,EAAE,SAZP;AAaPC,IAAAA,cAAc,EAAE,SAbT;AAcPC,IAAAA,SAAS,EAAE,SAdJ;AAePC,IAAAA,QAAQ,EAAE,SAfH;AAgBPC,IAAAA,aAAa,EAAE,SAhBR;AAiBPC,IAAAA,WAAW,EAAE,SAjBN;AAkBPC,IAAAA,SAAS,EAAE,SAlBJ;AAmBPC,IAAAA,UAAU,EAAE,SAnBL;AAoBPC,IAAAA,QAAQ,EAAE;AACRZ,MAAAA,IAAI,EAAE;AADE,KApBH;AAuBPa,IAAAA,MAAM,EAAE,SAvBD;AAwBP;AACA;AACA;AACAC,IAAAA,KAAK,EAAE,SA3BA;AA4BPC,IAAAA,IAAI,EAAE;AACJf,MAAAA,IAAI,EAAE,SADF;AAEJgB,MAAAA,IAAI,EAAE,MAFF,CAGJ;AACA;AACA;AACA;;AANI,KA5BC;AAoCPC,IAAAA,SAAS,EAAE;AACTjB,MAAAA,IAAI,EAAE;AADG,KApCJ;AAuCPkB,IAAAA,gBAAgB,EAAE;AAChBlB,MAAAA,IAAI,EAAE;AADU,KAvCX;AA0CPmB,IAAAA,UAAU,EAAE;AACVnB,MAAAA,IAAI,EAAE;AADI,KA1CL;AA6CPoB,IAAAA,QAAQ,EAAE;AA7CH,GAnBe;AAkExBC,EAAAA,UAAU,EAAE;AACVC,IAAAA,cAAc,EAAE;AACdC,MAAAA,cAAc,EAAE;AACdC,QAAAA,IAAI,EAAE;AACJ;AACAC,UAAAA,QAAQ,EAAE;AAFN,SADQ;AAKdC,QAAAA,OAAO,EAAE;AACPD,UAAAA,QAAQ,EAAE;AADH;AALK;AADF;AADN;AAlEY,CAAD,CAAzB;;AAiFA,SAASE,GAAT,GAAe;AAAA;;AACb,QAAMC,OAAO,GAAG/D,WAAW,CAAEgE,KAAD;AAAA;;AAAA,WAAWA,KAAX,aAAWA,KAAX,uCAAWA,KAAK,CAAEC,KAAlB,iDAAW,aAAcC,EAAzB;AAAA,GAAD,CAA3B;AACA,QAAMC,KAAK,GAAGnE,WAAW,CAAEgE,KAAD;AAAA;;AAAA,WAAWA,KAAX,aAAWA,KAAX,sCAAWA,KAAK,CAAEI,IAAlB,gDAAW,YAAaD,KAAxB;AAAA,GAAD,CAAzB;AAEA,QAAM;AAAEE,IAAAA,IAAF;AAAQC,IAAAA,OAAR;AAAiBC,IAAAA;AAAjB,MAA2BrE,uCAAuC,CAAC;AACvEsE,IAAAA,SAAS,EAAE;AACTT,MAAAA,OADS;AAETI,MAAAA;AAFS;AAD4D,GAAD,CAAxE;AAMA1F,EAAAA,KAAK,CAACgG,SAAN,CAAgB,MAAM;AACpB,QAAIJ,IAAJ,aAAIA,IAAJ,uBAAIA,IAAI,CAAEK,YAAV,EAAwB;AAAA;;AACtB,YAAMC,WAAW,GAAGhF,IAAI,CAAC0E,IAAD,aAACA,IAAD,uBAACA,IAAI,CAAEK,YAAN,CAAmBE,SAApB,CAAxB;AACA/D,MAAAA,OAAO,CAACC,GAAR,CAAY6D,WAAZ;AACAE,MAAAA,eAAe,CAAEC,YAAD,IAAkB;AAChC,YAAIA,YAAJ,EAAkB;AAChB,iBAAO,CAAC,IAAGH,WAAH,aAAGA,WAAH,uBAAGA,WAAW,CAAEI,KAAhB,CAAD,EAAwB,GAAGD,YAA3B,CAAP;AACD,SAFD,MAEO;AACL,iBAAOH,WAAP,aAAOA,WAAP,uBAAOA,WAAW,CAAEI,KAApB;AACD;AACF,OANc,CAAf;AAOAC,MAAAA,gBAAgB,CAAEC,aAAD,IAAmB;AAClC,YAAIA,aAAJ,EAAmB;AACjB,iBAAO,CAAC,IAAGN,WAAH,aAAGA,WAAH,uBAAGA,WAAW,CAAEO,MAAhB,CAAD,EAAyB,GAAGD,aAA5B,CAAP;AACD,SAFD,MAEO;AACL,iBAAON,WAAP,aAAOA,WAAP,uBAAOA,WAAW,CAAEO,MAApB;AACD;AACF,OANe,CAAhB;AAOAC,MAAAA,oBAAoB,CAACd,IAAD,aAACA,IAAD,6CAACA,IAAI,CAAEK,YAAP,uDAAC,mBAAoBU,UAArB,CAApB;AACD;AACF,GApBD,EAoBG,CAACf,IAAD,EAAOE,KAAP,CApBH;AAqBA,QAAM,CAACc,KAAD,EAAQC,QAAR,IAAoB7G,KAAK,CAAC8G,QAAN,CAAe,GAAf,CAA1B;AACA,sBACE,QAAC,mBAAD;AAAqB,IAAA,MAAM,EAAEhE,WAA7B;AAAA,2BACE,QAAC,cAAD;AAAgB,MAAA,MAAM,EAAEL,MAAxB;AAAA,6BACE,QAAC,QAAD;AAAU,QAAA,KAAK,EAAEhC,KAAjB;AAAA,+BACE,QAAC,aAAD;AAAe,UAAA,KAAK,EAAEsC,KAAtB;AAAA,iCACE,QAAC,MAAD;AAAA,oCACE,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAK,cAAA,SAAS,EAAC,aAAf;AAAA,sCACE,QAAC,MAAD;AAAA,wCACE,QAAC,KAAD;AAAO,kBAAA,IAAI,EAAC,OAAZ;AAAA,yCACE,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBADF,eAIE,QAAC,KAAD;AAAO,kBAAA,IAAI,EAAC,SAAZ;AAAA,yCACE,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBAJF,eAOE,QAAC,KAAD;AAAO,kBAAA,IAAI,EAAC,OAAZ;AAAA,yCACE,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBAPF,eAUE,QAAC,KAAD;AAAO,kBAAA,IAAI,EAAC,mBAAZ;AAAA,yCACE,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBAVF;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAeE,QAAC,eAAD;AACE,gBAAA,aAAa,EAAE,CAACgE,KAAD,EAAQC,QAAR,KAAqBH,QAAQ,CAACG,QAAD,CAD9C;AAEE,gBAAA,YAAY,EAAEJ;AAFhB;AAAA;AAAA;AAAA;AAAA,sBAfF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAiCD;;GAjEQvB,G;UACS9D,W,EACFA,W,EAEmBE,uC;;;KAJ1B4D,G;AAmET,eAAeA,GAAf","sourcesContent":["import React from \"react\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport FoodMenuPage from \"./pages/food-menu-page\";\nimport DrinksMenuPage from \"./pages/drinks-menu-page\";\nimport CheckoutPage from \"./pages/checkout-page\";\nimport OrderStatePage from \"./pages/order-state-page\";\nimport store from \"./store\";\nimport { Provider } from \"react-redux\";\nimport { ThemeProvider, createTheme } from \"@mui/material/styles\";\nimport BottomNavigator from \"./BottomNavigator\";\nimport Header from \"./Header\";\nimport \"./App.css\";\nimport { ApolloClient, InMemoryCache, ApolloProvider } from \"@apollo/client\";\nimport { last } from \"ramda\";\nimport { QueryClient, QueryClientProvider } from \"react-query\";\nimport { split, HttpLink } from \"@apollo/client\";\nimport { useSelector } from \"react-redux\";\nimport { getMainDefinition } from \"@apollo/client/utilities\";\nimport { useOrderChangedSubscriptionSubscription } from \"./generated/graphql\";\nimport {\n  cacheOrderedDrinksFromWebSocket,\n  cacheOrderedMealsFromWebSocket,\n} from \"./pages/orderSlice\";\nimport { WebSocketLink } from \"@apollo/client/link/ws\";\n\nconst httpLink = new HttpLink({\n  uri: \"http://localhost:8000/graphql\",\n});\n\nconst wsLink = new WebSocketLink({\n  uri: \"ws://localhost:8000/graphql\",\n  options: {\n    reconnect: true,\n    // TODO AUTHENTICATION\n    // connectionParams: {\n    //   authToken: user.authToken,\n    // },\n  },\n});\n\n// The split function takes three parameters:\n//\n// * A function that's called for each operation to execute\n// * The Link to use for an operation if the function returns a \"truthy\" value\n// * The Link to use for an operation if the function returns a \"falsy\" value\nconst splitLink = split(\n  ({ query }) => {\n    console.log(query);\n    const definition = getMainDefinition(query);\n    return (\n      definition.kind === \"OperationDefinition\" &&\n      definition.operation === \"subscription\"\n    );\n  },\n  wsLink,\n  httpLink\n);\n\nconst client = new ApolloClient({\n  //uri: \"http://localhost:8000/graphql\",\n  link: splitLink,\n  fetchOptions: {\n    mode: \"no-cors\",\n  },\n  //credentials: \"same-origin\",\n  cache: new InMemoryCache(),\n});\n\n// Create a client\nconst queryClient = new QueryClient();\n\nconst theme = createTheme({\n  typography: {\n    h6: {\n      fontSize: 14,\n    },\n    h5: {\n      fontSize: 15,\n    },\n    h4: {\n      fontSize: 18,\n    },\n    subtitle2: {\n      fontSize: 12,\n    },\n  },\n  //We can define App themes in here\n  status: {\n    danger: \"#e53e3e\",\n  },\n  palette: {\n    primary: {\n      main: \"#1769aa\",\n      lighter: \"##6573C3\",\n    },\n    lighter: {\n      main: \"#757ce8\",\n    },\n    neutral: {\n      main: \"#64748B\",\n      contrastText: \"#fff\",\n    },\n    primaryColor: \"#4a148c\",\n    secondaryColor: \"#ff6f00\",\n    sedatmava: \"#C9C9C9\",\n    carhartt: \"#006f33\",\n    primaryPurple: \"#6200EE\",\n    primaryBlue: \"#246EE9\",\n    lightGray: \"#EAEAEA\",\n    cornFlower: \"#7B8CDE\",\n    charCoal: {\n      main: \"#2D4654\",\n    },\n    mantis: \"#7DD181\",\n    // black: {\n    //   main: \"#000\",\n    // },\n    black: \"#000000\",\n    onyx: {\n      main: \"#D0CFCF\",\n      font: \"#000\",\n      // zaujimava modra main: \"#6699CC\",\n      //main: \"#DFE0DC\",\n      //main: \"#F4F4F8\",\n      //main: \"#C9CAD9\",\n    },\n    secondary: {\n      main: \"#6425A7\",\n    },\n    secondaryLighter: {\n      main: \"#F4EDFB\",\n    },\n    onyxDarker: {\n      main: \"#484747\",\n    },\n    darkGray: \"#ccc\",\n  },\n  components: {\n    MuiButtonGroup: {\n      styleOverrides: {\n        root: {\n          // apply theme's border-radius instead of component's default\n          minWidth: 20,\n        },\n        grouped: {\n          minWidth: 20,\n        },\n      },\n    },\n  },\n});\n\nfunction App() {\n  const orderId = useSelector((state) => state?.order?.id);\n  const token = useSelector((state) => state?.user?.token);\n\n  const { data, loading, error } = useOrderChangedSubscriptionSubscription({\n    variables: {\n      orderId,\n      token,\n    },\n  });\n  React.useEffect(() => {\n    if (data?.orderChanged) {\n      const newSuborder = last(data?.orderChanged.suborders);\n      console.log(newSuborder);\n      setOrderedMeals((orderedMeals) => {\n        if (orderedMeals) {\n          return [...newSuborder?.meals, ...orderedMeals];\n        } else {\n          return newSuborder?.meals;\n        }\n      });\n      setOrderedDrinks((orderedDrinks) => {\n        if (orderedDrinks) {\n          return [...newSuborder?.drinks, ...orderedDrinks];\n        } else {\n          return newSuborder?.drinks;\n        }\n      });\n      setCurrentFinalPrice(data?.orderChanged?.finalPrice);\n    }\n  }, [data, error]);\n  const [value, setValue] = React.useState(\"/\");\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ApolloProvider client={client}>\n        <Provider store={store}>\n          <ThemeProvider theme={theme}>\n            <Router>\n              <Header />\n              <div className=\"app-wrapper\">\n                <Switch>\n                  <Route path=\"/food\">\n                    <FoodMenuPage />\n                  </Route>\n                  <Route path=\"/drinks\">\n                    <DrinksMenuPage />\n                  </Route>\n                  <Route path=\"/cart\">\n                    <CheckoutPage />\n                  </Route>\n                  <Route path=\"/orderInformation\">\n                    <OrderStatePage />\n                  </Route>\n                </Switch>\n                <BottomNavigator\n                  onRouteChange={(event, newValue) => setValue(newValue)}\n                  currentRoute={value}\n                />\n              </div>\n            </Router>\n          </ThemeProvider>\n        </Provider>\n      </ApolloProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}